define("tiny_codepro/ui",["exports","./modal","core/modal_factory","core/modal_events","./common"],(function(_exports,_modal,_modal_factory,_modal_events,_common){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.handleAction=void 0,_modal=_interopRequireDefault(_modal),_modal_factory=_interopRequireDefault(_modal_factory),_modal_events=_interopRequireDefault(_modal_events);_exports.handleAction=editor=>{displayDialogue(editor)};const displayDialogue=async editor=>{const data={elementid:"codepro_"+editor.id},modal=await _modal_factory.default.create({type:_modal.default.TYPE,templateContext:data,large:!0});modal.header.hide(),modal.footer.show();const targetElem=modal.body.find("#codepro_"+editor.id)[0];let codeEditor;require.config({paths:{cm6:_common.baseUrl+"/vendor/codemirror6/dist/editor.bundle"}}),require(["cm6"],(function(CodeProEditor){codeEditor=new CodeProEditor(targetElem),codeEditor.setValue(editor)})),await modal.show(),await codeEditor.create(),modal.onresize=function(){codeEditor.layout()},modal.footer.find("button.btn").on("click",(evt=>{evt.target.classList.contains("btn-primary")&&codeEditor.updateChanges(),modal.hide(),codeEditor.dispose(),modal.destroy()})),modal.getRoot().on(_modal_events.default.hidden,(()=>{codeEditor.dispose(),modal.destroy()}))};new WeakMap,new WeakMap,new WeakMap,new WeakSet;new WeakMap,new WeakMap,new WeakMap,new WeakSet}));

//# sourceMappingURL=ui.min.js.map